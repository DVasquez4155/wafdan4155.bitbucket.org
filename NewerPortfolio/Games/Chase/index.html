<!DOCTYPE html>
<!--
Portfolio - December 14, 2016
By Daniel Vasquez
-->
<html>
    <head id='head'>
        <title id='title'>Chase</title>
        <style>
            body  {
                background-color: #010f20;
            }
        </style>
        <script src='../../contents/headerandfooter.js'></script>
        <script>
            var currentSite = 'games';
            var currentsite = 'Chase';
        </script>
    </head>
    <body>
        <header id='header'></header>
        <div id='links'></div>

        <div class='body'>
            <h1 id='h1Title' class='title dark'>Chase</h1>
            <div id="container">
                <div id="figures">
                    <div id='key'>None</div>
                    <div id='timer'>0:00:00</div>
                    <div id='button'><button id='startover'>Another Game</button></div>
                    <p></p>
                    <svg width='600' height='400' viewbox='0 0 600 400'
                        xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink= "http://www.w3.org/1999/xlink">

                        <defs>
                        </defs>

                        <!-- the shapes and stuff will go here -->

                        <rect x='0' y='0' width='600' height='400' fill='beige' />
                        <circle cx='25' cy='25' id="player" r='5' fill='orange' />
                        <circle cx='200' cy='300' id="comp" r='5' fill='red' />

                    </svg>
                    <br />
                </div>
            </div>
        </div>

        <footer id='footer'></footer>
        <script src="get.js"></script>
        <script>
            get('body')[0].onkeypress = function(e) {
                get('#key').innerHTML = e.key
                
            };
            
            var x = 25;
            var y = 25;
            var dx = 1;
            var dy = 1;
            var x2 = 500;
            var y2 = 200;
            var dx2 = -1;
            var dy2 = -1;
            var speed = 5;
            var win = false;
            var c1 = 0;
            get('#button').onclick = function () {
                var speed = 5;
                get('#player').setAttribute ('cx', 25);
                get('#player').setAttribute ('cy', 25);
                
                get('#comp').setAttribute ('cx', 500);
                get('#comp').setAttribute ('cy', 200);
                var win = false;
                console.log(win)
                
                var continued = setInterval(continued, 0);
                
            }
                
                var time = 0;
                var h = 0;
                var m = 0;
                var s = 0;
            get('body')[0].onkeydown = function(e) {
                get('#key').innerHTML = e.key
                
                //left
                if (e.keyCode == 37) {
                    get('body')[0].style.backgroundColor = 'orange';
                    if (dx == 1 && dx == 1) {
                        dx = -1;
                        dy = -1;
                    }
                    else if (dx == -1 && dy == 1) {
                        dx = -1;
                        dy = -1;
                    }
                    else if (dx == -1 && dy == -1) {
                        dx = -1;
                        dy = 1;
                    }
                    else if (dx == 1 && dy == -1) {
                        dx = 1;
                        dy = -1;
                    };
                }
                
                
                // Right
                else if (e.keyCode == 39) {
                    get('body')[0].style.backgroundColor = 'yellow';
                    if (dx == -1 && dy == 1) {
                        dx = 1;
                        dy = -1;
                    }
                    else if (dx == 1 && dy == 1) {
                        dx = 1;
                        dy = -1;
                    }
                    else if (dx == 1 && dy == -1) {
                        dx = 1;
                        dy = 1;
                    }
                    else if (dx == -1 && dy == -1) {
                        dx = 1;
                        dy = 1;
                    }
                }
                
                
                // Down
                else if (e.keyCode == 40) {
                    get('body')[0].style.backgroundColor = 'blue';
                    speed = speed + 1
                    if (speed == 16) {
                        speed = speed - 1
                    }
                }
                
                // Up
                else if (e.keyCode == 38) {
                    get('body')[0].style.backgroundColor = 'lightgreen';
                    speed = speed - 1
                    if (speed == -1) {
                        speed = speed + 1
                    }
                }
                else {
                    get('body')[0].style.backgroundColor = '';
                }
            }
            function animate2 () {
                x2 += dx2;
                y2 += dy2;
                get('#comp').setAttribute ('cx', x2);
                get('#comp').setAttribute ('cy', y2);
                if (x2 >= 595 || x2 < 5) {
                    dx2 = -dx2;
                }
                if (y2 > 395 || y2 <= 5) {
                    dy2 = -dy2;
                }
                //Randomness
                var ran = Math.floor(Math.random()*200);
                
                if (ran == 5) {
                    var randomTurn = Math.floor(Math.random()*2);
                    if (randomTurn == 0) {
                        left()
                    }
                    else if (randomTurn == 1) {
                        right()
                    }
                    
                }
                //left
                function left() {
                    if (dx2 == 1 && dx2 == 1) {
                        dx2 = -1;
                        dy2 = -1;
                    }
                    else if (dx2 == -1 && dy2 == 1) {
                        dx2 = -1;
                        dy2 = -1;
                    }
                    else if (dx2 == -1 && dy2 == -1) {
                        dx2 = -1;
                        dy2 = 1;
                    }
                    else if (dx2 == 1 && dy2 == -1) {
                        dx2 = 1;
                        dy2 = -1;
                    };
                }
                
                
                // Right
                function right() {
                    if (dx2 == -1 && dy2 == 1) {
                        dx2 = 1;
                        dy2 = -1;
                    }
                    else if (dx2 == 1 && dy2 == 1) {
                        dx2 = 1;
                        dy2 = -1;
                    }
                    else if (dx2 == 1 && dy2 == -1) {
                        dx2 = 1;
                        dy2 = 1;
                    }
                    else if (dx2 == -1 && dy2 == -1) {
                        dx2 = 1;
                        dy2 = 1;
                    }
                }
            }
            animate2()
            function animate () {
                x += dx;
                y += dy;
                get('#player').setAttribute ('cx', x);
                get('#player').setAttribute ('cy', y);
                if (x >= 595 || x < 5) {
                    dx = -dx;
                }
                if (y > 395 || y <= 5) {
                    dy = -dy;
                }
                var c1 = Math.sqrt(((x-x2) * (x-x2)) + ((y-y2) * (y-y2)));
                if (c1 <= 10) {
                    clearInterval(continued)
                    if (win == false) {
                        win = true;
                        clearInterval(timer);
                        alert("You won!");
                        c1 = 100;
                    }
                }
            }
            animate()
            function continued () {
                if (win == false) {
                    setTimeout(animate, speed);
                    setTimeout(animate2, speed);
                }
            }
            var time = 0;
            var h = 0;
            var m = 0;
            var s = 0;
            var ms = 0;
            function timed() {
                time++;
                ms++;
                if (ms >= 100) {
                    ms = 0;
                    s++
                }
                if (ms<10) {
                    millisec = "0" + ms
                }
                else {
                    millisec = ms
                }
                if (s >= 60) {
                    s = 0;
                    m++
                }
                if (s<10) {
                    sec = "0" + s
                }
                else {
                    sec = s
                }
                if (m >= 60) {
                    m = 0;
                    h++
                }
                if (m<10) {
                    min = "0" + m
                }
                else {
                    min = m
                }
                get("#timer").innerHTML = h + ":" + min + ":" + sec + ":" + millisec;
            }
            var timer = setInterval(timed, 10);
            var continued = setInterval(continued, 0);
        </script>
    </body>

</html>